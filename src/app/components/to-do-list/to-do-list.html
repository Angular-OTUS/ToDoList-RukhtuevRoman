<div class="task-manager">
    <h1 class="task-title">{{ commonLabels.appTitle }}</h1>
    @if (isLoading$ | async) {
        <app-loader [isLoading]="true"></app-loader>
    } @else {
        <div class="task-list-wrapper">
            <div class="task-list-container">
                <ul class="task-list">
                    @for (task of tasks$ | async; track task.id) {
                        <li>
                            <app-to-do-list-item
                                [task]="task"
                                [selectedItemId]="(selectedItemId$ | async) || -1"
                                (delete)="onDelete(task.id)"
                                (click)="onSelectItem(task.id)"
                            ></app-to-do-list-item>
                        </li>
                    }
                </ul>
                <div class="add-task-container">
                    <mat-form-field class="add-task-form-field">
                        <input matInput [(ngModel)]="newTaskText" [placeholder]="formLabels.addPlaceholder" />
                    </mat-form-field>
                    <mat-form-field class="add-task-description-form-field">
                        <textarea
                            matInput
                            [(ngModel)]="newTaskDescription"
                            [placeholder]="formLabels.addDescriptionPlaceholder"
                        ></textarea>
                    </mat-form-field>
                    <app-button
                        type="button"
                        [tooltipText]="formLabels.addTooltip"
                        [disabled]="!newTaskText.trim()"
                        (click)="onAdd($event)"
                        class="button button--add"
                    >
                        {{ formLabels.add }}
                    </app-button>
                </div>
            </div>
            <div class="description">{{ (selectedTask$ | async)?.description || '' }}</div>
        </div>
    }
</div>
